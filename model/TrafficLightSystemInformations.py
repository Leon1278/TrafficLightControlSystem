import logging
import model.SimulationInformations as simInfo

logging.basicConfig(filename=f'{simInfo.OUTPUT_DIR}/{simInfo.LOGGING_FILENAME}.log',
                    format='%(asctime)s %(levelname)-8s %(message)s',
                    level=logging.DEBUG,
                    datefmt='%Y-%m-%d %H:%M:%S')

# stores necessary informations to run multiple TLS instances
# contradictingTlsSignals are used to generate all possible tls phases for every individuell tls
class TrafficLightSystemInformations:

    def __init__(self,net):
        self.tlsDecisions = {}
        self.qTables = {}
        self.arrivalDistances = {}
        self.contradictingTlsSignals = {
        "cluster_1443568606_1834131515_1834131519_1834131548_1834131550":
            {0:[2,3,4,5,7,8,11,12,13,14],
            1:[2,3,4,5,7,8,11,12,13,14],
            2:[0,1,7,8,9,13,14,15,16,17,18],
            3:[0,1,7,8,9,13,14,15,16,17,18],
            4:[0,1,7,8,9,10,11,12,17,18],
            5:[0,1,7,8,9,10,11,12,17,18],
            6:[0,1,11,12],
            7:[0,1,2,3,4,5,11,12,13,14],
            8:[0,1,2,3,4,5,11,12,13,14],
            9:[2,3,4,5,11,12,13,14,15,16,17,18],
            10:[4,5,17,18],
            11:[0,1,4,5,6,7,8,9,17,18],
            12:[0,1,4,5,6,7,8,9,17,18],
            13:[0,1,2,3,7,8,9,17,18],
            14:[0,1,2,3,7,8,9,17,18],
            15:[2,3,9],
            16:[2,3,9],
            17:[2,3,4,5,9,10,11,12,13,14],
            18:[2,3,4,5,9,10,11,12,13,14]},
        "30965809":
            {0:[4,7],
             1:[4,5,7,8,9,10],
             2:[3,4,5,6,9,10],
             3:[6,10],
             4:[0,1,2,6,7,10],
             5:[1,2,6,7,8,9],
             6:[2,3,4,5,9,10],
             7:[0,1,4,5,9,10],
             8:[1,5],
             9:[1,2,5,6,7],
             10:[1,2,4,6,7]},
        "gneJ214":
            {0:[6,7],
             1:[6,7],
             2:[6,7,8,9,10,11,12],
             3:[9,10,11],
             4:[9,10,11],
             5:[9,10,11],
             6:[0,1,2,9,10,11,12],
             7:[0,1,2,9,10,11,12],
             8:[2],
             9:[2,3,4,5,6,7],
             10:[2,3,4,5,6,7],
             11:[2,3,4,5,6,7],
             12:[2,6,7]},
        "214620430":
             {0:[5],
              1:[5,6,7,11,12,13,14,15],
              2:[5,6,7,9,10,13,14,15],
              3:[5,6,7,8,9,10,13,14,15],
              4:[10,15],
              5:[0,1,2,3,10,15],
              6:[0,1,2,3,10,15],
              7:[1,2,3,10,11,12,13,14],
              8:[2,3,13,14],
              9:[2,3,13,14],
              10:[2,3,4,5,6,7,13,14,15],
              11:[1,5,6,7,13,14,15],
              12:[1,7],
              13:[1,7,8,9,10],
              14:[1,7,8,9,10],
              15:[1,2,3,4,5,6,10]},
        "30965800":
             {0:[6,12],
              1:[6,7,12,13],
              2:[6,7,12,13,14,15,16,17],
              3:[6,7,11,15,16,17],
              4:[6,7,11,15,16,17],
              5:[11,17],
              6:[0,1,2,3,4,11,12,17],
              7:[0,1,2,3,4,11,12,13,17],
              8:[3,4,11,12,13,14,15,16],
              9:[3,15],
              10:[3,4,15,16],
              11:[3,4,5,6,7,8,15,16,17],
              12:[0,1,2,6,7,8,15,16,17],
              13:[1,2,6,7,8,15,16,17],
              14:[2,8],
              15:[2,3,8,9,10,11,12,13],
              16:[2,3,4,8,10,11,12,13],
              17:[2,3,4,5,6,7,11,12,13]},
        "cluster_21532613_25633348":
             {0:[6],
              1:[6,7,14,15,16,17,18],
              2:[6,7,14,15,16,17,18],
              3:[6,7,8,9,10,11,12,13,16,17,18],
              4:[6,7,8,9,11,12,13,16,17,18],
              5:[12,17],
              6:[0,1,2,3,4,12,13,17,18],
              7:[0,1,2,3,4,12,13,14,17,18],
              8:[1,2,3,4,12,13,14,15,16],
              9:[1,2,3,4,12,13,14,16],
              10:[3],
              11:[3,4,16],
              12:[3,4,5,6,7,8,9,16,17],
              13:[3,4,6,7,8,9,16,17,18],
              14:[1,2,7,8,9,16,17,18],
              15:[1,8],
              16:[1,2,8,9,11,12,13,14],
              17:[1,2,3,4,5,6,7,12,13,14],
              18:[1,2,3,4,6,7,13,14]},
        "cluster_277739062_39732718_89129091_89129092":
             {0:[3],
              1:[3,4,5,6],
              2:[6],
              3:[0,1,6],
              4:[1,6],
              5:[1],
              6:[1,2,3,4]},
        "cluster_306484187_cluster_1200363791_1200363826_1200363834_1200363898_1200363927_1200363938_1200363947_1200364074_1200364103_1507566554_1507566556_255882157_306484190":
             {0:[],
              1:[],
              2:[8,9,10,11],
              3:[9,10,11],
              4:[10],
              5:[10,11],
              6:[2,3,10,11],
              7:[2,3,10,11],
              8:[2],
              9:[2,3],
              10:[2,3,4,5,6,7],
              11:[2,3,5,6,7]},
        "cluster_494830315_cluster_283155103_285141680_3300414849_3300414850_3300414851_792810590_792810596_792810637":
             {0:[5,6,7],
              1:[5,6,7,8, 12,13,14,15,16],
              2:[5,6,7,8,9,10,11,14,15,16],
              3:[10,15],
              4:[10,11,15,16],
              5:[0,1,2,10,11,12,13,15,16,17,18],
              6:[0,1,2,10,11,12,13,15,16,18],
              7:[0,1,2,10,11,12,13,14],
              8:[1,2,10,11,12,13,14],
              9:[2,14],
              10:[2,3,4,5,6,7,8,14,15],
              11:[2,4,5,6,7,8,14,15,16],
              12:[0,1,2,5,6,7,8,14,15,16,17,18],
              13:[0,1,2,5,6,7,8,14,15,16,17],
              14:[0,1,2,7,8,9,10,11,12,13],
              15:[0,1,2,3,4,5,6,7,8,10,11,12,13],
              16:[0,1,2,3,4,5,6,7,8,11,12,13],
              17:[5,12],
              18:[5,6,12,13]},
        "cluster_32564118_371775504":
             {0:[5],
              1:[5,6,7],
              2:[5,7],
              3:[],
              4:[7],
              5:[0,1,2,7],
              6:[1],
              7:[1,2,4,5]},
        "gneJ205":
             {0:[5,10],
              1:[5,10,11,12,13],
              2:[5,6,10,12,13],
              3:[5,6,7,8,9,12,13],
              4:[8],
              5:[0,1,2,3,8,9,10,13],
              6:[2,3,8,9,10,12],
              7:[3,12],
              8:[3,4,5,6,12],
              9:[3,5,6,12,13],
              10:[0,1,2,5,6,12,13],
              11:[1],
              12:[1,2,3,6,7,8,9,10],
              13:[1,2,3,9,10]},
        "gneJ210":
             {0:[6,8],
              1:[6,7,8,9],
              2:[6,7,8,9,10,11,12,13],
              3:[6,7,8,9,11,12,13],
              4:[12],
              5:[12,13],
              6:[0,1,2,3,12,13],
              7:[1,2,3,12,13],
              8:[0,1,2,3,12,13],
              9:[1,2,3,12,13],
              10:[2],
              11:[2,3],
              12:[2,3,4,5,6,7,8,9],
              13:[2,3,5,6,7,8,9]},
        "gneJ143":
             {0:[4],
              1:[4,5,6,7,8,9,10,11],
              2:[4,5,6,7,10,11],
              3:[11],
              4:[0,1,2,11],
              5:[1,2,11],
              6:[1,2,11],
              7:[1,2,8,9,10],
              8:[1,7],
              9:[1,7],
              10:[1,2,7],
              11:[1,2,3,4,5,6]},
        "gneJ207":
             {0:[],
              1:[4],
              2:[4,5,6,7],
              3:[],
              4:[1,2,6,7],
              5:[2],
              6:[2,4],
              7:[2,4]},
        "cluster_25579770_2633530003_2633530004_2633530005":
             {0:[5],
              1:[5,6,7,12,13,14,15,16,17],
              2:[5,6,7,8,12,14,15,16,17],
              3:[5,6,7,8,9,10,11,16,17],
              4:[10],
              5:[0,1,2,3,10,11,17],
              6:[0,1,2,3,10,11,12,17],
              7:[1,2,3,10,11,14,13,14,15,16],
              8:[1,2,3,10,11,12,14,15,16],
              9:[15],
              10:[3,4,5,6,7,8,15,16],
              11:[3,5,6,7,8,15,16,17],
              12:[1,2,6,7,8,15,16,17],
              13:[1,7],
              14:[1,2,7,8],
              15:[1,2,7,8,9,10,11,12],
              16:[1,2,3,7,8,10,11,12],
              17:[1,2,3,5,6,11,12]},
        "98101360":
             {0:[10],
              1:[5,6,10,11,12,13,14],
              2:[5,6,7,8,9,12,13,14],
              3:[8,13],
              4:[8,9,13,14],
              5:[0,1,2,8,9,10,13,14],
              6:[1,2,8,9,10,11,12],
              7:[2,12],
              8:[2,3,4,5,6,12,13],
              9:[2,4,5,6,12,13,14],
              10:[0,1,5,6,12,13,14],
              11:[1,6],
              12:[1,2,6,7,8,9,10],
              13:[1,2,3,4,5,8,9,10],
              14:[1,2,4,5,9,10]}}

    def getTlsDecision(self, tlsid):
        return self.tlsDecisions[tlsid]

    def setTlsDecision(self, tlsid, value):
        self.tlsDecisions[tlsid] = value

    def getQTable(self, tlsid):
        return self.qTables[tlsid]

    def setQTable(self, tlsid, qTable):
        self.qTables[tlsid] =  qTable

    def setArrivalDistance(self, tlsid, arrivalDistance):
        self.arrivalDistances[tlsid] = arrivalDistance

    def getArrivalDistance(self, tlsid):
        return self.arrivalDistances.get(tlsid)















